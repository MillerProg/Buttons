<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Buttons</title>
		<link rel="stylesheet" href="css/styles.css">
        <link rel="stylesheet" href="css/normalize.css">
		<script src="cadesplugin_api_new.js"></script>		
	</head>
	<body class="page-body">	
        <div class="wrapper">
            <div class="content content_white">
		    
		    <button class="sign" onclick="run()">Проверить работу с ЭЦП</button>
		    <input type="text" id="hashVal1">
		    <input type="text" id="hashVal2">
		    <input type="text" id="hashVal3">
            </div>
            <div class="content content_white">
            </div>
            <div class="content content_white">
            </div>
            <div class="content content_white">
            </div>
            <div class="content content_lightblue">
            </div>
            <div class="content content_lightblue">
            </div>
            <div class="content content_lightblue">
            </div>
            <div class="content content_lightblue">
            </div>
            <div class="content content_lightblue">
            </div>
            <div class="content content_lightblue">
            </div>
            <div class="content content_blue">
            </div>
            <div class="content content_blue">
            </div>
            <div class="content content_blue">
            </div>
            <div class="content content_blue">
            </div>
            <div class="content content_blue">
            </div>
            <div class="content content_blue">
            </div>
		
		<div class="content content_white">
                <div class="button1__wrapper">
                    <div class="button1 button1__first-line"></div> 
                    <div class="button1 button1__second-line"></div>                   
                    <div class="button1 button1-round">                   
                         <div class="button1 button1-phone"> 
                             <a href="#callform"><img src="images/call.png" /></a>       
                         </div>                        
                    </div>                    
                </div>
            </div>
            <div class="content content_white">
                <div class="button2__wrapper">
                    <div class="button2 button2__line"></div> 
                    <div class="button2 button2-round">                   
                         <div class="button2 button2-phone"> 
                             <a href="#callform"><img src="images/call.png" /></a>       
                         </div>                     
                    </div> 
                    <div class="button2 button2-round-mini"></div>
                </div>
            </div>
        </div> 
		
		<script>
    var CADESCOM_HASH_ALGORITHM_CP_GOST_3411 = 100;

    function run() {
        // Создаем объект CAdESCOM.HashedData
        var oHashedData = cadesplugin.CreateObject("CAdESCOM.HashedData");

        // Алгоритм хэширования нужно указать до того, как будут переданы данные
        oHashedData.Algorithm = CADESCOM_HASH_ALGORITHM_CP_GOST_3411;
        
        // Передаем данные
        oHashedData.Hash("Some data here.");

        // Вычисляем хэш-значение
        var sHashValue1 = oHashedData.Value;
        // Хэш-значение будет вычислено от данных в кодировке UCS2-LE
        // Для алгоритма SHA-1 хэш-значение будет совпадать с вычисленным при помощи CAPICOM
        document.getElementById("hashVal1").innerHTML = sHashValue1;

        // Получение значения свойства oHashedData.Value сбрасывает
        // состояние объекта (алгоритм хэширования остается прежним).
        // Но само значение свойства можно получить несколько раз:
        var sHashValue2 = oHashedData.Value;
        document.getElementById("hashVal2").innerHTML = sHashValue2;

        // То же самое хэш-значение можно получить, если передать данные по частям
        oHashedData.Hash("Some ");
        oHashedData.Hash("data ");
        oHashedData.Hash("here.");
        var sHashValue3 = oHashedData.Value;
        document.getElementById("hashVal3").innerHTML = sHashValue3;
    }
		</script>
	</body>
</html>
